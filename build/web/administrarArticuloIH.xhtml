<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title> Editar Artículos </title>
            </f:facet>
        </h:head>
<h:body>

            <p:layout fullPage="true">
            
 
                <p:layoutUnit  position="north" size="170"  closable="true" >
               
                <p:graphicImage value="resources/prestapalaorquesta.png" />    
                
            </p:layoutUnit>
              
              <p:layoutUnit position="west" size="175" collapsible="true">
<!--                <h:form>
                    <p:menu>
                        <p:submenu label="Menú">
                            <p:menuitem value="Instrumentos"  action = "mostrarInstrumentosIH" />
                            <p:menuitem value="Música" action ="mostrarMusicaIH" />
                            <p:menuitem value="Sonido" action ="mostrarSonidoIH" />
                            <p:menuitem value="Accesorios" action ="mostrarAccesoriosIH" />
                          

                        </p:submenu>

                    </p:menu>
                    </h:form>-->
                </p:layoutUnit>
                <p:layoutUnit position="center">
                    <h:form id="myform">
                        <p:growl id="messages" />
<!--                        <p:messages id="messages" showDetail="true"  closable="true" />-->
                    
                    
                    <p:contextMenu for="lista" widgetVar="cMenu">   
                        <p:menuitem value="Edit Cell" icon="ui-icon-search" onclick="PF('cellCars').showCellEditor();return false;"/>  
                    <p:menuitem value="Hide Menu" icon="ui-icon-close" onclick="PF('cMenu').hide()"/>  
                </p:contextMenu> 
                    

<p:dataTable  id="lista" value="#{mBArticulo.lista}"  var="car" editable="true"   editMode="cell"  sortOrder =""  widgetVar="cellCars">
                <f:facet name="header">
                        Mis articulos
                   </f:facet>
        
                        <p:ajax event="cellEdit" listener="#{mBArticulo.onCellEdit(event)}" update=":myform:messages"  />
<!--                        <p:ajax event="rowEdit" listener="{mBArticulo.onRowEdit(event)}" update=":myform:messages" />
                        <p:ajax event="rowEditCancel" listener="{mBArticulo.onRowCancel(event)}" update=":myform:messages"  />-->
        
       
       
       
                        
       <p:column headerText="Id Articulo">
           <p:cellEditor>
               <f:facet  name="output"><h:outputText value="#{car.idarticulo}"  /></f:facet>
               <f:facet name="input"><p:inputText value="#{car.idarticulo}"  /></f:facet>
                  </p:cellEditor>
       </p:column>
                         
       
       
       <p:column headerText="Descripción">
           <p:cellEditor>
               <f:facet name="output"><h:outputText value="#{car.descripcion}" /></f:facet>
               <f:facet name="input"><p:inputText  value="#{car.descripcion}"  /></f:facet>
           </p:cellEditor>
       </p:column>
         

       <p:column headerText="Estado">
           <p:cellEditor>
               <f:facet name="output"><h:outputText value="#{car.estado.estado}" /></f:facet>
               <f:facet name="input"><p:inputText  value="#{car.estado.estado}"  /></f:facet>
           </p:cellEditor>
       </p:column>
         
       
       <p:column headerText="Disponible">
           
               <p:selectBooleanCheckbox value="#{car.disponible}" ></p:selectBooleanCheckbox>
           
       </p:column>
         
         <p:column>
            <f:facet name="header">Imagen</f:facet> 
            <p:graphicImage value="resources/#{car.rutaimagen}"  style="width:100%" />   
            
         </p:column>

                    
    		<p:column>
    				
    			<f:facet name="header">Eliminar</f:facet>    				
                        <p:commandButton action="#{mBArticulo.eliminarArticuloDos(car.idarticulo)}" value="Eliminar Articulo"  >
                                          <p:confirm header="Eliminar Articulo" message="¿Estas seguro que quieres eliminar el articulo?" icon="ui-icon-alert" />
                                         </p:commandButton>
                        
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes"  />
                            <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" />
                            </p:confirmDialog>
    			<!-- <h:commandLink value="Eliminar Articulo" 
                                       action="  " /> -->
    				
    		</p:column>
<!--       <f:facet name="output"><h:outputText value="{mBArticulo.rutaimagen}" /></f:facet>
                    <p:column>
             <p:cellEditor>
            <f:facet name="header">Imagen</f:facet> 
            <f:facet name="output"><h:outputText value="{car.rutaimagen}" /></f:facet>
            <f:facet name="input"><p:inputText  value="{mBArticulo.rutaimagen}" /></f:facet>
            </p:cellEditor>
         </p:column>-->
       
                        
<!--<p:column style="width:32px">
           <p:rowEditor   />
       </p:column>-->
     </p:dataTable>
	  <br/>
                    <br/>
                    <br/>
                    <p:commandButton action="#{mBArticulo.actualizar()}"  value="Guardar Cambios"  update="messages" />
                    <p:commandButton action="administrarCuentaIH"  value="Regresar"   />
                    <br/>
                    <br/>
                    
                    
                    
                       </h:form>
                </p:layoutUnit>



            </p:layout>

        </h:body>

    </f:view>
</html>
